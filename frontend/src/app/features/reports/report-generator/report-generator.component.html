<div class="container">
  <div class="report-generator-container">
    <h1>Generate Reports</h1>
    
    <mat-card>
      <mat-card-content>
        <form [formGroup]="reportForm" (ngSubmit)="generateReport()">
          <!-- Customer Selection -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Select Customer</mat-label>
            <mat-select formControlName="customerId">
              <mat-option *ngFor="let customer of customers" [value]="customer._id">
                {{ customer.name }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="reportForm.get('customerId')?.hasError('required')">
              Customer is required
            </mat-error>
          </mat-form-field>
          
          <!-- Month Selection -->
          <mat-form-field appearance="outline" class="full-width" *ngIf="availableMonths.length > 0">
            <mat-label>Select Month</mat-label>
            <mat-select formControlName="yearMonth">
              <mat-option *ngFor="let month of availableMonths" [value]="month.year + '-' + month.month">
                {{ month.label }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="reportForm.get('yearMonth')?.hasError('required')">
              Month is required
            </mat-error>
          </mat-form-field>
          
          <p *ngIf="reportForm.get('customerId')?.value && availableMonths.length === 0" class="no-data-message">
            No time entries found for this customer.
          </p>
          
          <!-- Report Type Selection -->
          <div class="report-type-container">
            <label class="section-label">Report Type:</label>
            <mat-radio-group formControlName="reportType" class="report-type-group">
              <mat-radio-button value="timesheet">Timesheet Report</mat-radio-button>
              <mat-radio-button value="invoice">Invoice Report</mat-radio-button>
            </mat-radio-group>
          </div>
          
          <!-- Error Message -->
          <div *ngIf="error" class="error-message">
            {{ error }}
          </div>
          
          <!-- Submit Button -->
          <div class="button-container">
            <button mat-flat-button color="primary" type="submit" 
                   [disabled]="reportForm.invalid || loading || availableMonths.length === 0">
              <span *ngIf="!loading">Generate Report</span>
              <span *ngIf="loading">Generating...</span>
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div> 